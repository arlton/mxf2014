var AMASS=function(){"use strict";var e,t,n,r,i,s,o,u=document.getElementById("attendee-template").innerHTML,a=document.getElementById("attendees"),f=document.getElementById("ticket-number"),l=document.getElementById("amass-form"),c=document.getElementById("billing-info"),h={transitions:{}},p={};n=function(){var e,t;e=this;t=[];r=function(e,t){var n,r,i,s;n=this;n.parent=e;n.attributes=t||{};n.attributes.attendeeNumber=n.parent.count()+1;n.attributes.hasRemove=n.attributes.attendeeNumber>1;r=document.createElement("div");r.innerHTML=n.template(n.attributes);i=r.getElementsByTagName("input");s=r.getElementsByClassName("remove");for(var o=0;o<i.length;o++)i[o].onkeyup=function(){var e=this;t[e.name]=e.value};for(var o=0;o<s.length;o++)s[o].onclick=function(){n.parent.remove(n)};a.appendChild(r);if(typeof h.transitions.addAttendee=="function"){r.style.display="none";h.transitions.addAttendee(r,function(){})}n.el=r};r.prototype.template=Handlebars.compile(u);e.add=function(n){n=n||{};n.index=e.count();t.push(new r(e,n))};e.remove=function(e){typeof e=="number"&&(e=t[e]);typeof p.onAttendeeRemove=="function"&&p.onAttendeeRemove(e);t.splice(e.index,1);typeof h.transitions.removeAttendee=="function"?h.transitions.removeAttendee(e.el,function(){e.el.parentNode.removeChild(e.el)}):e.el.parentNode.removeChild(e.el)};e.all=function(){var n=[];for(var r=0;r<e.count();r++)n.push(t[r].attributes);return n};e.serialize=function(){return JSON.stringify(e.all())};e.count=function(){return t.length}};s=function(){var e,t,n;e=this;t=[];n=0;e.addItem=function(t){t.id&&t.price&&t.title&&e._items.push(t);return t.id&&t.price&&t.title};e.removeItem=function(n){for(var r=0;r<t.length;r++)if(t[r].id===n.id){t.splice(r,1);e.updateTotal();return t}};e.getItems=function(){return JSON.parse(JSON.stringify(e._items))};e.updateTotal=function(){var t=e.getItems();n=0;for(var r=0;r<t.length;r++)n+=t[r].price;return e.getTotal()};e.getTotal=function(){return n.toString()};e.empty=function(){t=[];n=0}};i=new n;o=new s;i.add();p.onAttendeeRemove=function(){f.value=i.count()};f.onkeyup=function(){var e=i.count(),t=Number(f.value);if(t>e)for(var n=0;n<t-e;n++)i.add();else for(var n=0;n<e-t;n++)i.remove(i.count()-1)};l.onsubmit=function(e){var t,n,r,s;e.preventDefault();n=c.getElementsByTagName("input");r=[];for(var o=0;o<n.length;o++){s={};s[n[o].name]=n[o].value;r.push(s)}t={attendees:i.all(),billingInfo:r};console.log(t)};return function(){var e;e=this;e.setEvent=function(e){typeof e=="object"&&(h.eventInfo=e)};e.setTransitions=function(e){typeof e=="object"&&(h.transitions=e)};return e}}(),amass=new AMASS;amass.setTransitions({addAttendee:function(e,t){$(e).fadeIn("fast",t)},removeAttendee:function(e,t){$(e).fadeOut("fast",t)}});